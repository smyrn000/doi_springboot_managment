import{_ as h,u as w,c as a,w as i,g as c,a as s,d as g,t as _,b as f,v as l,o as d,p as v,e as y}from"./index-g5GNysKY.js";const b={setup(){return{router:w()}},data(){return{username:"",password:"",full_name:"",email:"",address:"",phone_num:"",error:!1,errorMessage:"",role:"user"}},methods:{async registerUser(){try{const t=localStorage.getItem("token");if(!t){this.hasData=!1;return}const e=await fetch("http://localhost:8080/admin/register",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password,full_name:this.full_name,email:this.email,address:this.address,phone_num:this.phone_num})});if(!e.ok)throw new Error("Login failed");const u=await e.json();console.log(u),alert("Εγγραφή με επιτυχία")}catch(t){this.error=!0,this.errorMessage=t.message||"Registration failed"}},async registerAdmin(){try{const t=localStorage.getItem("token");if(!t){this.hasData=!1;return}const e=await fetch("http://localhost:8080/admin/register-admin",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})});if(!e.ok)throw new Error("Login failed");const u=await e.json();console.log(u)}catch(t){this.error=!0,this.errorMessage=t.message||"Registration failed"}}}},n=t=>(v("data-v-b931286e"),t=t(),y(),t),k={class:"registration-container"},U=n(()=>s("h1",null,"Εγγραφή Χρήστη",-1)),S=n(()=>s("option",{value:"user"},"User",-1)),V=n(()=>s("option",{value:"admin"},"Admin",-1)),x=[S,V],M={key:0,class:"error-message"},C={class:"form-group"},A=n(()=>s("label",{for:"reg-username"},"Username:",-1)),I={class:"form-group"},B=n(()=>s("label",{for:"reg-password"},"Password:",-1)),T={class:"form-group"},j=n(()=>s("label",{for:"full-name"},"Ονοματεπώνυμο:",-1)),D={class:"form-group"},E=n(()=>s("label",{for:"email"},"Email:",-1)),N={class:"form-group"},O=n(()=>s("label",{for:"address"},"Διεύθηνση:",-1)),P={class:"form-group"},R=n(()=>s("label",{for:"phone-num"},"Τηλέφωνο:",-1)),z=n(()=>s("div",null,null,-1)),J={key:0,class:"error-message"},L={class:"form-group"},q=n(()=>s("label",{for:"reg-username"},"Username:",-1)),F={class:"form-group"},G=n(()=>s("label",{for:"reg-password"},"Password:",-1)),H=n(()=>s("div",null,null,-1));function K(t,e,u,m,r,p){return d(),a("div",k,[U,i(s("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.role=o),class:"role-select"},x,512),[[c,r.role]]),r.role==="user"?(d(),a("form",{key:0,onSubmit:e[9]||(e[9]=g((...o)=>p.registerUser&&p.registerUser(...o),["prevent"]))},[r.error?(d(),a("div",M,_(r.errorMessage),1)):f("",!0),s("div",C,[A,i(s("input",{type:"text",id:"reg-username","onUpdate:modelValue":e[1]||(e[1]=o=>r.username=o)},null,512),[[l,r.username]])]),s("div",I,[B,i(s("input",{type:"password",id:"reg-password","onUpdate:modelValue":e[2]||(e[2]=o=>r.password=o)},null,512),[[l,r.password]])]),s("div",T,[j,i(s("input",{type:"text",id:"full-name","onUpdate:modelValue":e[3]||(e[3]=o=>r.full_name=o)},null,512),[[l,r.full_name]])]),s("div",D,[E,i(s("input",{type:"text",id:"email","onUpdate:modelValue":e[4]||(e[4]=o=>r.email=o)},null,512),[[l,r.email]])]),s("div",N,[O,i(s("input",{type:"text",id:"address","onUpdate:modelValue":e[5]||(e[5]=o=>r.address=o)},null,512),[[l,r.address]])]),s("div",P,[R,i(s("input",{type:"text",id:"phone-num","onUpdate:modelValue":e[6]||(e[6]=o=>r.phone_num=o)},null,512),[[l,r.phone_num]])]),s("button",{type:"submit",onClick:e[7]||(e[7]=o=>m.router.go(-1))},"Εγγραφή"),z,s("button",{onClick:e[8]||(e[8]=g(o=>m.router.go(-1),["prevent"]))},"Πίσω")],32)):f("",!0),r.role==="admin"?(d(),a("form",{key:1,onSubmit:e[14]||(e[14]=g((...o)=>p.registerAdmin&&p.registerAdmin(...o),["prevent"]))},[r.error?(d(),a("div",J,_(r.errorMessage),1)):f("",!0),s("div",L,[q,i(s("input",{type:"text",id:"reg-username","onUpdate:modelValue":e[10]||(e[10]=o=>r.username=o)},null,512),[[l,r.username]])]),s("div",F,[G,i(s("input",{type:"password",id:"reg-password","onUpdate:modelValue":e[11]||(e[11]=o=>r.password=o)},null,512),[[l,r.password]])]),s("button",{type:"submit",onClick:e[12]||(e[12]=o=>m.router.go(-1))},"Εγγραφή"),H,s("button",{onClick:e[13]||(e[13]=g(o=>m.router.go(-1),["prevent"]))},"Πίσω")],32)):f("",!0)])}const W=h(b,[["render",K],["__scopeId","data-v-b931286e"]]);export{W as default};
