import{_ as c,u as _,c as a,a as t,t as l,o as h,p as d,e as u}from"./index-g5GNysKY.js";const p={setup(){return{router:_()}},data(){return{username:"",full_name:"",AFM:"",email:"",address:"",phone_num:"",errorMessage:"Δέν είναι δυνατή η εύρεση χρήστη",hasData:!1,hasApp:!1}},methods:{async retrieveUserData(){const s=localStorage.getItem("token");if(this.username=localStorage.getItem("username"),!s||!this.username){this.hasData=!1;return}const e=await fetch(`http://localhost:8080/user/${this.username}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});e.ok&&(this.hasData=!0);const n=await e.json();this.full_name=n.full_name,this.AFM=n.afm,this.email=n.email,this.address=n.address,this.phone_num=n.phone_num},async checkFormSubmission(){const s=localStorage.getItem("token");if(!s)return;const e=await fetch(`http://localhost:8080/user/${this.username}/hasSubmittedForm`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(e.ok){const n=await e.json();console.log(n),this.hasApp=n}},logout(){localStorage.clear(),this.router.push("/auth/login")}},beforeMount(){this.retrieveUserData()},mounted(){this.checkFormSubmission()}},o=s=>(d("data-v-3a96fa1a"),s=s(),u(),s),m={class:"details"},f=o(()=>t("h2",null,"Στοιχεία Νόμιμου Εκπροσώπου",-1)),b={key:0},g={class:"label"},v=o(()=>t("h3",null,"Όνοματεπώνυμο:",-1)),k={style:{"font-weight":"bold"}},y={class:"label"},w=o(()=>t("h3",null,"Εταιρικό ΑΦΜ:",-1)),S={key:0},A={style:{"font-weight":"bold"}},D={key:1},F=o(()=>t("h3",{style:{"font-weight":"bold"}},"Δέν έχει δωθεί",-1)),I=[F],M={class:"label"},B=o(()=>t("h3",null,"Email:",-1)),j={style:{"font-weight":"bold"}},C={class:"label"},x=o(()=>t("h3",null,"Διεύθηνση:",-1)),U={style:{"font-weight":"bold"}},z={class:"label"},E=o(()=>t("h3",null,"Τηλέφωνο:",-1)),T={style:{"font-weight":"bold"}},V={key:0,class:"button-container"},H=o(()=>t("h3",null,"Αίτηση ΑΕΔ",-1)),N=[H],R={key:1,class:"button-container grayed"},$=o(()=>t("button",null,[t("h3",null,"Η Αίτηση έχει ήδη υποβληθεί")],-1)),q=[$],G={key:1,class:"error-msg"},J={class:"button-container"},K=o(()=>t("h3",null,"Έξοδος",-1)),L=[K];function O(s,e,n,P,i,Q){return h(),a("div",m,[f,i.hasData?(h(),a("div",b,[t("div",g,[v,t("h3",k,l(i.full_name),1)]),t("div",y,[w,i.AFM?(h(),a("div",S,[t("h3",A,l(i.AFM),1)])):(h(),a("div",D,I))]),t("div",M,[B,t("h3",j,l(i.email),1)]),t("div",C,[x,t("h3",U,l(i.address),1)]),t("div",z,[E,t("h3",T,l(i.phone_num),1)]),i.hasApp?(h(),a("div",R,q)):(h(),a("div",V,[t("button",{onClick:e[0]||(e[0]=r=>this.router.push("/forms"))},N)]))])):(h(),a("div",G,[t("h2",null,l(i.errorMessage),1)])),t("div",J,[t("button",{onClick:e[1]||(e[1]=r=>this.logout())},L)])])}const X=c(p,[["render",O],["__scopeId","data-v-3a96fa1a"]]);export{X as default};
