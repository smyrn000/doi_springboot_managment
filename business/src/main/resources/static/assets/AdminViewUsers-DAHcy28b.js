import{_ as f,u as g,c as l,F as y,r as k,a as e,w as c,v as u,o as d,t as _,b as m,p as v,e as U}from"./index-g5GNysKY.js";const b={setup(){return{router:g()}},data(){return{hasData:!1,users:[],insideUser:!1,username:"",password:"",full_name:"",email:"",address:"",phone_num:""}},methods:{async retrieveUsers(){const o=localStorage.getItem("token");if(!o){this.hasData=!1;return}const t=await fetch("http://localhost:8080/admin/users/all",{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});t.ok||console.warn("Retrieve Users Error");const i=await t.json();console.log(i),this.users=i,i.length>0&&(this.hasData=!0,this.insideUser=!1)},async deleteUser(o){const t=localStorage.getItem("token");if(!t){this.hasData=!1;return}(await fetch(`http://localhost:8080/admin/delete/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).ok||console.log("Error"),alert("Χρήστης Διαγράφθηκε"),this.router.go(-1)},async getSingleUser(o){this.insideUser=!0;const t=localStorage.getItem("token");if(!t){this.hasData=!1;return}const i=await fetch(`http://localhost:8080/user/${o}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});i.ok&&(this.hasData=!0);const r=await i.json();console.warn(r),this.username=o,this.full_name=r.full_name,this.email=r.email,this.address=r.address,this.phone_num=r.phone_num},async updateUser(o){try{const t=localStorage.getItem("token");if(!t){this.hasData=!1;return}const i=await fetch(`http://localhost:8080/admin/update/${o}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({full_name:this.full_name,email:this.email,address:this.address,phone_num:this.phone_num})});if(!i.ok)throw new Error("Login failed");const r=await i.json();console.log(r),alert("Οι αλλαγές αποθηκεύτικαν με επυτιχία")}catch(t){this.error=!0,this.errorMessage=t.message||"Registration failed"}}},beforeMount(){this.retrieveUsers()}},n=o=>(v("data-v-d326401c"),o=o(),U(),o),w={key:0,class:"container"},D=n(()=>e("h2",null,"Λίστα Χρηστών",-1)),S={class:"user-details"},C=n(()=>e("h3",null,"Όνομα Χρήστη:",-1)),E={style:{"font-weight":"bold"}},x={class:"user-details"},I=n(()=>e("h3",null,"Ονοματεπώνυμο:",-1)),j={style:{"font-weight":"bold"}},B={key:0,class:"user-details"},T=n(()=>e("h3",null,"ΑΦΜ:",-1)),V={key:0,style:{"font-weight":"bold"}},A={key:1,style:{"font-weight":"bold"}},R={class:"user-details"},z=n(()=>e("h3",null,"Ρόλος:",-1)),L={style:{"font-weight":"bold"}},M={class:"modify-buttons"},N=["onClick"],F=n(()=>e("h3",null,"Διαγραφή",-1)),J=[F],O=["onClick"],P=n(()=>e("h3",null,"Τροποποίηση",-1)),q=[P],G={key:1},H={class:"button-container"},K=n(()=>e("h3",null,"Πίσω",-1)),Q=[K],W={key:1,class:"form-container"},X=n(()=>e("h2",null,"Επεξεργασία Χρήστη",-1)),Y={class:"form-group"},Z=n(()=>e("label",{for:"full-name"},"Ονοματεπώνυμο:",-1)),$={class:"form-group"},ee=n(()=>e("label",{for:"email"},"Email:",-1)),te={class:"form-group"},se=n(()=>e("label",{for:"address"},"Διεύθηνση:",-1)),oe={class:"form-group"},ne=n(()=>e("label",{for:"phone-num"},"Τηλέφωνο:",-1)),ie={class:"button-container"},ae=n(()=>e("h3",null,"Ανανέωση Στοιχείων",-1)),re=[ae],le={class:"button-container"},de=n(()=>e("h3",null,"Πίσω",-1)),he=[de];function ce(o,t,i,r,a,h){return a.insideUser?(d(),l("div",W,[X,e("div",Y,[Z,c(e("input",{type:"text",id:"full-name","onUpdate:modelValue":t[1]||(t[1]=s=>a.full_name=s)},null,512),[[u,a.full_name]])]),e("div",$,[ee,c(e("input",{type:"text",id:"email","onUpdate:modelValue":t[2]||(t[2]=s=>a.email=s)},null,512),[[u,a.email]])]),e("div",te,[se,c(e("input",{type:"text",id:"address","onUpdate:modelValue":t[3]||(t[3]=s=>a.address=s)},null,512),[[u,a.address]])]),e("div",oe,[ne,c(e("input",{type:"text",id:"phone-num","onUpdate:modelValue":t[4]||(t[4]=s=>a.phone_num=s)},null,512),[[u,a.phone_num]])]),e("div",ie,[e("button",{onClick:t[5]||(t[5]=s=>h.updateUser(this.username))},re)]),e("div",le,[e("button",{onClick:t[6]||(t[6]=s=>h.retrieveUsers())},he)])])):(d(),l("div",w,[D,a.hasData?(d(!0),l(y,{key:0},k(a.users,s=>(d(),l("div",{key:s.id,class:"user-item"},[e("div",S,[C,e("h3",E,_(s.username),1)]),e("div",x,[I,e("h3",j,_(s.full_name),1)]),s.authorities[0].authority==="USER"?(d(),l("div",B,[T,s.afm?(d(),l("h3",V,_(s.afm),1)):(d(),l("h3",A,"Δέν Έχει δωθεί"))])):m("",!0),e("div",R,[z,e("h3",L,_(s.authorities[0].authority),1)]),e("div",M,[e("button",{onClick:p=>h.deleteUser(s.username)},J,8,N),s.authorities[0].authority==="USER"?(d(),l("button",{key:0,onClick:p=>h.getSingleUser(s.username)},q,8,O)):m("",!0)])]))),128)):(d(),l("h3",G,"Δεν υπάρχουν χρήστες για εμφάνιση.")),e("div",H,[e("button",{onClick:t[0]||(t[0]=s=>r.router.go(-1))},Q)])]))}const _e=f(b,[["render",ce],["__scopeId","data-v-d326401c"]]);export{_e as default};
