import{_ as p,u as g,f as u,c as h,F as m,r as f,t as c,a as t,o as a,p as v,e as k}from"./index-g5GNysKY.js";const y={setup(){return{router:g()}},data(){return{hasData:!1,insideForm:!1,enteredForm:"",formInteracted:!1,forms:[],members:[],afmGiven:"",error:"",hasError:!1}},methods:{async retrieveForms(){const n=localStorage.getItem("token");if(!n){this.hasData=!1;return}const e=await fetch("http://localhost:8080/admin/forms",{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!e.ok){this.hasError=!0,this.error="Error Retrieving Forms";return}this.hasData=!0;const r=await e.json();this.forms=r,r.length||(this.hasData=!1),console.log(r)},formatDate(n){const e=new Date(n),r=e.getFullYear(),l=e.getMonth()+1,o=e.getDate(),d=e.getHours(),i=String(e.getMinutes()).padStart(2,"0");return`${l}/${o}/${r} ${d}:${i}`},async enterForm(n){const e=localStorage.getItem("token"),r=await fetch(`http://localhost:8080/admin/forms/${n}`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!r.ok){this.hasError=!0,this.error="Error Entering Form";return}this.insideForm=!0;const l=await r.json();this.enteredForm=l,this.enteredForm.status==="Εγκρίθηκε"&&(this.formInteracted=!0),this.members=l.members.split(", "),console.log(l)},async apporveForm(n){const e=localStorage.getItem("token"),r=await fetch(`http://localhost:8080/admin/accept/${n}`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!r.ok){this.hasError=!0,this.error="Error Approving Form";return}this.formInteracted=!0;const l=await r.json();this.afmGiven=l,alert("Αίτηση Εγκρίθηκε"),u.go(-1)},async rejectForm(n){const e=localStorage.getItem("token"),r=await fetch(`http://localhost:8080/admin/reject/${n}`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!r.ok){this.hasError=!0,this.error="Error Approving Form";return}this.formInteracted=!0;const l=await r.json();console.log(l),alert("Αίτηση Απορρίφθηκε"),u.go(-1)}},beforeMount(){this.retrieveForms()}},s=n=>(v("data-v-c03fe617"),n=n(),k(),n),F={key:0,class:"container"},b=s(()=>t("h2",null,"Λίστα Αιτήσεων",-1)),w={class:"form-item"},D={class:"form-top-details"},E=["onClick"],I=s(()=>t("h4",null,"Είσοδος",-1)),S=[I],j={class:"form-details"},C=s(()=>t("h3",null,"Σκοπός Επιχείρησης",-1)),A={style:{"font-weight":"bold"}},B={class:"form-details"},T=s(()=>t("h3",null,"Ονοματεπώνυμο Εκπροσώπου",-1)),z={style:{"font-weight":"bold"}},x={class:"form-details"},G=s(()=>t("h3",null,"Κατάσταση",-1)),M={style:{"font-weight":"bold"}},O={key:1},P={key:2},R={class:"button-container"},V=s(()=>t("h3",null,"Πίσω",-1)),q=[V],H={key:1,class:"container entered-form"},L=s(()=>t("h2",null,"Αίτηση Άσκησης Επιχειρηματικής Δραστηριότητας",-1)),N=s(()=>t("h3",null,"Σκοπός Επιχείρησης:",-1)),Y={style:{"font-weight":"bold"}},J=s(()=>t("h3",null,"Καταστατικό Λειτουργίας:",-1)),K={style:{"font-weight":"bold"}},Q=s(()=>t("h3",null,"Έδρα Επιχείρησης:",-1)),U={style:{"font-weight":"bold"}},W=s(()=>t("h3",null,"Μέλη:",-1)),X=s(()=>t("h3",null,"Ημερομηνία Καταχώρησης:",-1)),Z={style:{"font-weight":"bold"}},$={key:0,class:"form-buttons"},tt=s(()=>t("h3",null,"Απόριψη Αίτησης",-1)),et=[tt],ot=s(()=>t("h3",null,"Αποδοχή Αίτησης",-1)),st=[ot],nt={key:1},rt={key:0},it=s(()=>t("h3",null,"Δεν Αποδόθηκε ΑΦΜ",-1)),ht=[it],at={key:1},lt=s(()=>t("h3",null,"Αποδόθηκε ΑΦΜ",-1)),ct={style:{"font-weight":"bold"}},dt={class:"button-container"},_t=s(()=>t("h3",null,"Πίσω",-1)),ut=[_t];function mt(n,e,r,l,o,d){return o.insideForm?(a(),h("div",H,[L,t("div",null,[N,t("h3",Y,c(o.enteredForm.purpose),1)]),t("div",null,[J,t("h3",K,c(o.enteredForm.katastatiko),1)]),t("div",null,[Q,t("h3",U,c(o.enteredForm.hq),1)]),t("div",null,[W,(a(!0),h(m,null,f(o.members,(i,_)=>(a(),h("h4",{key:_,style:{"font-weight":"bold"}},c(i),1))),128))]),t("div",null,[X,t("h3",Z,c(d.formatDate(o.enteredForm.entry_date)),1)]),o.enteredForm.status==="Σε Επεξεργασία"?(a(),h("div",$,[t("button",{onClick:e[1]||(e[1]=i=>d.rejectForm(o.enteredForm.id))},et),t("button",{onClick:e[2]||(e[2]=i=>d.apporveForm(o.enteredForm.id))},st)])):(a(),h("div",nt,[o.enteredForm.status==="Απορρίφθηκε"?(a(),h("div",rt,ht)):(a(),h("div",at,[lt,t("h3",ct,c(o.afmGiven),1)]))])),t("div",dt,[t("button",{onClick:e[3]||(e[3]=i=>o.insideForm=!1)},ut)])])):(a(),h("div",F,[b,o.hasData?(a(!0),h(m,{key:0},f(o.forms,i=>(a(),h("div",{key:i.id},[t("div",w,[t("div",D,[t("h3",null,c(d.formatDate(i.entry_date)),1),t("button",{onClick:_=>d.enterForm(i.id)},S,8,E)]),t("div",j,[C,t("h3",A,c(i.purpose),1)]),t("div",B,[T,t("h3",z,c(i.user.full_name),1)]),t("div",x,[G,t("h3",M,c(i.status),1)])])]))),128)):o.hasError?(a(),h("h3",O,c(o.error),1)):(a(),h("h3",P,"Δέν Υπάρχει κάποια Αίτηση Σε Αναμονή")),t("div",R,[t("button",{onClick:e[0]||(e[0]=i=>l.router.go(-1))},q)])]))}const pt=p(y,[["render",mt],["__scopeId","data-v-c03fe617"]]);export{pt as default};
